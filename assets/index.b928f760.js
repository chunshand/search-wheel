import{c as x,q as s,o as y,e as z,w as l,f as n,i as $,g as e,I as T,a3 as A,J as k,D as F,n as w,S as L,H as P,l as b,U as S,A as U,G as q,h as G,a5 as I,Q as K,P as M,W as H,V as W,a6 as j}from"./vendor.67b40587.js";import{a as J,b as O,s as Q,c as R}from"./tag.72498485.js";import"./index.45414d3c.js";const X={class:"w-64"},Y=w("\u641C\u7D22"),Z=x({emits:["select"],setup(C,{emit:d}){s([{label:"\u4E0A\u7EBF",value:"online"},{label:"\u5F85\u5BA1\u6838",value:"default"},{label:"\u5DF2\u5220\u9664",value:"del"}]);const u=s(""),t=()=>{d("select",{content:u.value})};return(o,p)=>(y(),z(e(F),{vertical:""},{default:l(()=>[n(e(F),{align:"center"},{default:l(()=>[$("div",X,[n(e(T),{value:u.value,"onUpdate:value":p[0]||(p[0]=_=>u.value=_),size:"large",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u7684\u5185\u5BB9",onKeydown:A(t,["enter"])},null,8,["value","onKeydown"])]),n(e(k),{onClick:t,type:"primary",size:"large"},{default:l(()=>[Y]),_:1})]),_:1})]),_:1}))}});function ee({_page:C=1,_size:d=5,Api:u=J,call:t}){const o=s(C),p=s(d),_=s([]),r=s(!1),v=s(0),h=s(0);return{page:o,size:p,list:_,count:v,pageCount:h,loading:r,handleGetList:async(i,f)=>{r.value=!0,t&&t.start();let D={page:i,size:p.value,q:f};if(!u){r.value=!1,t&&t.done(null);return}let g=await u(D);g.code?(_.value=g.data.list,v.value=g.data.count,h.value=Math.ceil(v.value/p.value),r.value=!1,t&&t.done(g)):(r.value=!1,t&&t.error(g))}}}const te={key:0},ae=w("\u6807\u9898\uFF1A"),ne=w("\u4FEE\u6539"),se=w("\u65B0\u589E"),le=x({props:{id:{type:Number,required:!0,default:0}},emits:["done"],setup(C,{emit:d}){const u=C,t=L(),o=s(),p=async a=>{if(a==0)o.value={title:"",create_time:0,id:0,update_time:0};else{let i=await O({id:a});i.code==1&&_(i.data)}},_=a=>{o.value=a};P(()=>{p(u.id)});const r=a=>({id:a.id,title:a.title}),v=async()=>{let a=r(o.value),i=await Q(a);if(i.code!=1){t.warning(i.message);return}d("done")},h=async()=>{let a=await R(r(o.value));if(a.code!=1){t.warning(a.message);return}d("done")};return(a,i)=>o.value?(y(),b("div",te,[n(e(F),{vertical:""},{default:l(()=>[n(e(S),null,{default:l(()=>[ae]),_:1}),n(e(T),{value:o.value.title,"onUpdate:value":i[0]||(i[0]=f=>o.value.title=f),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["value"]),u.id>0?(y(),z(e(k),{key:0,type:"primary",block:"",onClick:v},{default:l(()=>[ne]),_:1})):(y(),z(e(k),{key:1,type:"primary",block:"",onClick:h},{default:l(()=>[se]),_:1}))]),_:1})])):U("v-if",!0)}}),ue={class:"p-4 relative min-h-screen",id:"drawer-target"},oe=w("\u6807\u7B7E"),ie=w("\u65B0\u589E"),de={class:"py-2"},re={key:0,class:"flex justify-center pt-4"},_e=x({setup(C){const d=s(!1),u=s(0),t=s([{title:"\u6807\u9898",key:"title"},{title:"\u64CD\u4F5C",key:"setting",render(c){return j(k,{size:"small",type:"success",onClick:()=>{E(c.id)}},{default:()=>"\u64CD\u4F5C"})}}]),o=q(()=>r.value),p=1,_=10,{list:r,page:v,size:h,pageCount:a,handleGetList:i}=ee({_page:p,_size:_}),f=s({content:"",state:"online"}),D=c=>{f.value.content=c.content,f.value.state=c.state,B(1)},g=c=>{B(c)},B=async c=>{await i(c,f.value.content)},E=c=>{d.value=!0,u.value=c},V=()=>{d.value=!1,B(1)};return P(()=>{B(1)}),(c,m)=>(y(),b("div",ue,[$("div",null,[n(e(F),null,{default:l(()=>[n(e(S),null,{default:l(()=>[oe]),_:1}),n(e(k),{type:"primary",onClick:m[0]||(m[0]=N=>E(0))},{default:l(()=>[ie]),_:1})]),_:1})]),n(e(G),null,{default:l(()=>[n(Z,{onSelect:D})]),_:1}),$("div",de,[n(e(I),{columns:t.value,data:e(o)},null,8,["columns","data"]),e(r).length>0?(y(),b("div",re,[n(e(K),{page:e(v),"onUpdate:page":m[1]||(m[1]=N=>M(v)?v.value=N:null),"page-size":e(h),"page-count":e(a),onUpdatePage:g},null,8,["page","page-size","page-count"])])):U("v-if",!0)]),n(e(H),{show:d.value,"onUpdate:show":m[2]||(m[2]=N=>d.value=N),width:"512px",placement:"right",to:"#drawer-target"},{default:l(()=>[n(e(W),null,{default:l(()=>[n(le,{id:u.value,onDone:V},null,8,["id"])]),_:1})]),_:1},8,["show"])]))}});export{_e as default};
